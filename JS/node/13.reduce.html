<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // 数组去重
        let arr = [1, 2, 3, 4, 56, 3, 2, 21, 42]
        let newArr = arr.reduce((prev, next, index, arr) => {
            if (!prev.includes(next)) {
                return prev.concat(next)
            } else {
                return prev
            }
        }, [])
        console.log(newArr);
        //  二维数组转化成一维数组
        let arr2 = [
            [1, 2],
            [3, 4],
            [5, 6, 2]
        ]
        let newArr2 = arr2.reduce((prev, next) => {
            return prev.concat(next)
        }, [])
        console.log(newArr2);
        //  多维数组转化为一维数组
        let arr3 = [
            [1, 2, [3, 4]],
            [2, 3, [4, 5, [7, 3, 8]]]
        ]

        let arr4 = [
            [0, 1],
            [2, 3],
            [4, [5, 6, 7]]
        ]
        let newArr3 = function (arr) {
            return arr.reduce((pre, cur) => pre.concat(Array.isArray(cur) ? newArr3(cur) : cur), [])
        }
        console.log(newArr3(arr3));

        // 计算数组中每个元素出现的次数
        let arr5 = ['name', 'age', 'long', 'short', 'long', 'name', 'name']
        let newArr4 = arr5.reduce((prev, next) => {
            if (next in prev) {
                prev[next]++
            } else {
                prev[next] = 1
            }
            return prev
        }, {})
        console.log(newArr4);

        // 按属性分组
        let obj = [
            { name: '张三', job: '数据分析师', country: '中国' },
            { name: '艾斯', job: '科学家', country: '中国' },
            { name: '雷尔', job: '科学家', country: '美国' },
            { name: '鲍勃', job: '软件工程师', country: '印度' },
        ]
        let newObj = obj.reduce((prev, next) => {
            // console.log(next);
            let key = next['country']
            if (!prev[key]) {
                prev[key] = []
            }
            prev[key].push(next)
            return prev
        }, [])
        console.log(newObj);

        // 反转字符串
        let str = 'teststringreverse'
        let newStr = ([...str]).reduce((prev, next) => {
            return next + prev
        })
        console.log(newStr);

        // 统计字符串中每个字符出现的次数
        let str2 = 'adefrfdnnfhdueassjfkdiskcddfjds'
        let newStr2 = ([...str2]).reduce((prev, next) => {
            if (!prev[next]) {
                prev[next] = 1
            } else {
                prev[next]++
            }
            return prev
        }, [])
        console.log(newStr2);

        //  组合多个数组方法
        // 住在 Hufflepuff 的巫师名字的新数组
        var wizards = [
            {
                name: 'Harry Potter',
                house: 'Gryfindor'
            },
            {
                name: 'Cedric Diggory',
                house: 'Hufflepuff'
            },
            {
                name: 'Tonks',
                house: 'Hufflepuff'
            },
            {
                name: 'Ronald Weasley',
                house: 'Gryfindor'
            },
            {
                name: 'Hermione Granger',
                house: 'Gryfindor'
            }
        ];
        let newWizards = wizards.reduce((prev, next) => {
            if (next.house == 'Hufflepuff') {
                prev.push(next.name)
            }
            return prev
        }, [])
        console.log(newWizards);
        // 合并数据到单个数组
        // 把 points 数值添加到每个巫师对象上
        let points = {
            HarryPotter: 500,
            CedricDiggory: 750,
            RonaldWeasley: 100,
            HermioneGranger: 1270
        };
        let newPoint = wizards.reduce((prev,next) => {
            let key = next.name.replace(' ', '');
            if(points[key]) {
               next.point = points[key]
            }else {
                next.point = 0
            }
            prev.push(next)
            return prev
        },[])
        console.log(newPoint);
    </script>
</body>

</html>