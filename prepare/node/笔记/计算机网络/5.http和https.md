## HTTP
### http和https

#### HTTP
##### 基本概念
http：超文本传输协议，是互联网上应用最为广泛的一种网络协议，是一个客户端和服务器端请求和应答的标准（TCP），用于从www服务端传输超文本到本地浏览器的传输协议，他可以使浏览器更加高效，使网络传输减少。

##### 请求方法
GET: 通常用来获取资源
HEAD: 获取资源的元信息
POST: 提交数据，即上传数据
PUT: 修改数据
DELETE: 删除资源(几乎用不到)
CONNECT: 建立连接隧道，用于代理服务器
OPTIONS: 列出可对资源实行的请求方法，用来跨域请求
TRACE: 追踪请求-响应的传输路径

##### GET和POST的区别
1. GET请求会被浏览器主动缓存下来，留下历史记录，而POST默认不会
2. GET只能继续URL编码，只能接收ASCII字符，而POST没有限制
3. GET是幂等的，而POST不是（幂等表示执行相同的操作，结果也是相同的）
4. GET请求会把请求报文一次性发出去，而POST会分为两个TCP数据包，首先发header部分，如果服务器响应100，然后发body部分（火狐浏览器除外，他的POST请求只发一个包）

##### 状态码
###### 1xx
1. 表示目前是协议的中间状态，还需要后续操作
2. 101 Switching Protocols。在HTTP升级为WebSocket的时候，如果服务器同意变更，就会发送状态码 101。
###### 2xx
1. 200 表示从客户端发送给服务器的请求被正常处理并返回
2. 204 表示客户端发送给服务器的请求得到了成功处理，但在返回的响应报文中不含实体的主体部分（没有资源可以返回）
3. 206 表示客户端进行了范围请求，并且服务器成功执行了这部分的get请求，响应报文中包含由content-range指定范围的实体内容

###### 3xx
1. 301 永久性重定向 表示请求的资源被分配了新的URL，之后使用更改的URL
2. 302 临时性重定向 表示请求的资源被分配了新的URL，希望本次访问使用新的URL
3. 303 表示请求的资源被分配了新的URL，应使用GET方法定向获取请求的资源
4. 304 表示客户端发送附带条件（是指采用GET方法的请求报文中包含if-Match、If-Modified-Since、If-None-Match、If-Range、If-Unmodified-Since中任一首部）的请求时，服务器端允许访问资源，但是请求为满足条件的情况下返回改状态码；
5. 307 与303有着相同的含义，307会遵照浏览器标准不会从POST变成GET；（不同浏览器可能会出现不同的情况）；

###### 4xx
1. 404 表示请求报文中存在语法错误
2. 401 未经许可，需要通过HTTP认证
3. 403 服务器拒绝本次访问（访问权限出现问题）
4. 404 表示服务器上无法找到请求的资源，除此之外，也可以在服务器拒绝请求但不想给拒绝原型时使用

###### 5xx
1. 500 表示服务器在执行请求时发生错误，也有可能是web应用存在的bug或者某些临时的错误
2. 503 表示服务器暂时处于超负载或正在进行停机维护，无法处理请求

##### HTTP优点
1. 灵活可拓展
2. 可靠传输
3. 请求-应答
4. 无状态。这里的状态指的是通信过程中的上下文信息，而每次HTTP请求都是独立、无关的，默认不需要保留状态信息。

##### HTTP缺点
1. 无状态。
    - 在需要长连接的场景中，需要保存大量的上下文信息，以免传输大量重复的信息，这时无状态就是http的缺点
    - 另外一些引用仅仅只是为了获取一些数据，不需要保存连接上下文信息，无状态反而减少了网络开销，此时就是优点
2. 明文传输
3. 队头阻塞问题
#### HTTPS
##### 基本概念
https：是以安全为目的的HTTP通道，简单来说就是HTTP的安全版，即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL。https的主要作用是：建立一个信息安全通道，来确保数组的传输，确保网站的真实性。
##### https的工作原理
1. 客户使用https url访问服务器，则要求web服务器建立ssl链接
2. web 服务器接收到客户端的请求之后，会将网站的证书（证书中包含了公钥），返回或者说传输给客户端。 
3. 客户端和 web 服务器端开始协商 SSL 链接的安全等级，也就是加密等级。 
4. 客户端浏览器通过双方协商一致的安全等级，建立会话密钥，然后通过网站的公钥来加密会话密钥，并传送给网站。 
5. web 服务器通过自己的私钥解密出会话密钥。 web 服务器通过会话密钥加密与客户端之间的通信

##### https工作流程
1. 客户端首先向服务端发送一个HTTPS请求
2. 服务端会把事先配置好的公钥证书随着其他信息返回给客户端
3. 客户端收到服务端发来的证书之后进行验证，（数字证书验证），会得到服务端的信息及公钥
4. 验证成功之后生成一个叫做 client_params 的参数发送给服务器；同时自己会用伪随机函数生成一个 secret，这个secret就是它们后续进行通信的对称密钥
5. 服务器在收到参数后也根据伪随机函数生成一个secret，这个secret就是后续进行通信的对称秘钥
6. 后面的传输用这个secret进行对称秘钥加解密传输
##### https的优点
1. 使用 HTTPS 协议可认证用户和服务器，确保数据发送到正确的客户机和服务器；
2. HTTPS 协议是由 SSL+HTTP 协议构建的可进行加密传输、身份认证的网络协议，要比 http 协议安全，可防止数据在传输过程中不被窃取、改变，确保数据的完整性。 
3. HTTPS 是现行架构下最安全的解决方案，虽然不是绝对安全，但它大幅增加了中间人攻 击的成本。

##### https的缺点
1. https 握手阶段比较费时，会使页面加载时间延长 50%，增加 10%~20%的耗电。 
2. https 缓存不如 http 高效，会增加数据开销。 
3. SSL 证书也需要钱，功能越强大的证书费用越高。 
4. SSL 证书需要绑定 IP，不能再同一个 ip 上绑定多个域名，ipv4 资源支持不了这种消耗。

#### 区别
1. http传输的数据都是未加密的，也就是明文的，网景公司设置了SSL协议来对http协议传输的数据进行加密处理，简单来说https协议是由http和ssl协议构建的可进行加密传输和身份认证的网络协议，比http协议的安全性更高
2. https协议需要ca证书，费用较高；http是超文本传输协议，信息是明文传输，https则是具有安全性的ssl加密传输协议，使用不同的链接方式，端口也不同，一般而言，http协议的端口为80，https的端口为443
3. http的链接很简单，是无状态的；https协议是由ssl+http协议构成的可进行加密传输，身份认证的网络协议，比http协议更安全

## 参考资料
1. https://github.com/LinDaiDai/niubility-coding-js/blob/master/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTPS%E9%9D%A2%E8%AF%95%E9%97%AE%E7%AD%94.md