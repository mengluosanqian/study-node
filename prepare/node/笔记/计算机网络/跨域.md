# 跨域
## 同源策略
1. 同源策略是指“协议+域名+端口”三者相同。
2. 如果缺少同源策略，浏览器很容易受到XSS、CSRF等攻击
3. 同源策略限制的内容：
    - cookie、localStorage、indexedDB等存储性内容
    - DOM节点
    - AJAX请求发送后，结果被浏览器拦截了
4. 容许跨域加载资源
    - `<img src=xxx>`
    - `<link href=xxx>`
    - `<script src=xxx>`

## 解决跨域的方法
### JSONP
1. 利用`<script></script>`标签没有跨域限制的漏洞。指向一个需要访问的地址并提供一个回调函数来接收数据
2. 使用简单并且兼容性不错，但是只限于get请求
```js
// 封装实现jsonp
function jsonp(url, jsonpCallback, success) {
 let script = document.createElement('script')
 script.src = url
 script.async = true
 script.type = 'text/javascript'
 window[jsonpCallback] = function(data) {
 success && success(data)
 }
 document.body.appendChild(script)
}
jsonp('http://xxx', 'callback', function(value) {
 console.log(value)
})

```