<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // function observe(obj, callback) {
        //     const newObj = {}
        //     Object.keys(obj).forEach(item => {
        //         Object.defineProperty(newObj, item, {
        //             configurable: true,
        //             enumerable: true,
        //             get() {
        //                 return obj[item]
        //             },
        //             set(newVal) {
        //                 obj[item] = newVal
        //                 callback(item, newVal)
        //             }
        //         })
        //     })
        //     return newObj
        // }
        function observe(obj, callback) {
            return new Proxy(obj, {
                get(target,key) {
                    return target[key]
                },
                set(target,key,value) {
                    target[key] = value
                    callback(key,value)
                }
            })
        }
        const obj = observe({
                name: '小鱼',
                sex: '女'
            },
            (key, value) => {
                console.log(`属性[${key}]的值被修改为[${value}]`)
            }
        )

        // 这段代码执行后，输出 属性[name]的值被修改为[妹纸]
        obj.name = '小鱿鱼11'

        // 这段代码执行后，输出 属性[sex]的值被修改为[女]
        obj.sex = '未知'
        const foo = (function () {
            let count = 1

            function increase() {
                return count++
            }
            increase.reset = function () {
                count = 1
            }
            return increase
        })()
        a = foo();
        b = foo();
        c = foo();
        // 此时  a 的值是1;b的值是2;c的值是3;
        console.log(a, b, c) // 1 2 3


        foo.reset();
        d = foo(); // d的值是1, 说明foo重新开始计数;
        console.log(d);
    </script>
    <style>
        .green {
            background-color: green;
        }
 
        .red {
            background-color: red;
        }
 
        .blue {
            background-color: blue;
        }
    </style>
    <div class="green blue red">
        fsdfasdfasd
    </div>
</body>

</html>